<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠ - ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤</title>
    <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Prompt', sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
        }

        .navbar-toggle {
            position: fixed;
            top: 20px;
            left: 20px;
            font-size: 24px;
            cursor: pointer;
            z-index: 1001;
            color: #333;
            background: white;
            padding: 10px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            display: none;
            transition: all 0.3s ease;
        }

        .navbar-toggle:hover {
            background: #f8f9fa;
            transform: scale(1.05);
        }

        .container {
            display: flex;
            min-height: 100vh;
        }

        .main-content {
            flex: 1;
            padding: 30px;
            margin-left: 260px;
            transition: all 0.3s ease;
            min-height: 100vh;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            background: white;
            padding: 20px 30px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.08);
        }

        .header h1 {
            font-size: 28px;
            color: #333;
            font-weight: 600;
        }

        .search-filter {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .search-container {
            position: relative;
        }

        .search-container input[type="text"] {
            padding: 12px 45px 12px 15px;
            width: 350px;
            border-radius: 10px;
            border: 2px solid #e9ecef;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .search-container input[type="text"]:focus {
            outline: none;
            border-color: #990000;
            box-shadow: 0 0 0 3px rgba(153, 0, 0, 0.1);
        }

        .search-container i {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: #666;
        }

        .filters-section {
            background: white;
            padding: 20px 30px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.08);
            margin-bottom: 20px;
        }

        .filters-row {
            display: flex;
            gap: 20px;
            align-items: center;
            flex-wrap: wrap;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .filter-group label {
            font-size: 14px;
            color: #666;
            font-weight: 500;
        }

        .filter-group select,
        .filter-group input {
            padding: 8px 12px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 14px;
        }

        .stats-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.08);
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
        }

        .stat-card.pending-payment::before { background: linear-gradient(90deg, #ff6b35, #f7931e); }
        .stat-card.payment-verification::before { background: linear-gradient(90deg, #9c27b0, #e91e63); }
        .stat-card.shipping-preparation::before { background: linear-gradient(90deg, #2196F3, #03DAC6); }
        .stat-card.shipping::before { background: linear-gradient(90deg, #ff9800, #ffc107); }
        .stat-card.completed::before { background: linear-gradient(90deg, #4CAF50, #8BC34A); }
        .stat-card.cancelled::before { background: linear-gradient(90deg, #dc3545, #c82333); }

        .stat-number {
            font-size: 24px;
            font-weight: 700;
            color: #333;
            margin-bottom: 5px;
        }

        .stat-label {
            color: #666;
            font-size: 14px;
        }

        .table-container {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 20px rgba(0,0,0,0.08);
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th, td {
            padding: 12px 8px;
            text-align: left;
            border-bottom: 1px solid #f0f0f0;
            vertical-align: middle;
        }

        th {
            background: #f8f9fa;
            font-weight: 600;
            color: #333;
            font-size: 13px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        td {
            color: #555;
            font-size: 14px;
        }

        .order-id {
            font-family: 'Courier New', monospace;
            font-weight: 600;
            color: #007bff;
            font-size: 13px;
            background: #f0f8ff;
            padding: 3px 6px;
            border-radius: 4px;
            display: inline-block;
        }

        .customer-info {
            display: flex;
            flex-direction: column;
            gap: 3px;
        }

        .customer-name {
            font-weight: 600;
            color: #333;
            font-size: 14px;
        }

        .customer-phone {
            font-size: 12px;
            color: #666;
        }

        .order-items {
            font-size: 12px;
            color: #666;
            max-width: 200px;
        }

        .item-count {
            background: #e9ecef;
            color: #495057;
            padding: 2px 6px;
            border-radius: 10px;
            font-size: 10px;
            font-weight: 600;
            margin-left: 5px;
        }

        .price-info {
            font-size: 15px;
            font-weight: 700;
            color: #333;
        }

        .status-badge {
            padding: 6px 10px;
            border-radius: 15px;
            font-size: 10px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.3px;
            display: inline-flex;
            align-items: center;
            gap: 4px;
            white-space: nowrap;
            min-width: fit-content;
        }

        /* ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ */
        .status-pending-payment { 
            background: #fff3cd; 
            color: #856404;
        }
        .status-pending-payment::before {
            content: 'üí≥';
            font-size: 10px;
        }

        .status-payment-verification { 
            background: #f3e5f5; 
            color: #7b1fa2;
        }
        .status-payment-verification::before {
            content: 'üîç';
            font-size: 10px;
        }

        .status-shipping-preparation { 
            background: #e3f2fd; 
            color: #1976d2;
        }
        .status-shipping-preparation::before {
            content: 'üì¶';
            font-size: 10px;
        }

        .status-shipping { 
            background: #fff3e0; 
            color: #f57c00;
        }
        .status-shipping::before {
            content: 'üöõ';
            font-size: 10px;
        }

        .status-completed { 
            background: #d4edda; 
            color: #155724;
        }
        .status-completed::before {
            content: '‚úÖ';
            font-size: 10px;
        }

        .status-cancelled { 
            background: #f8d7da; 
            color: #721c24;
        }
        .status-cancelled::before {
            content: '‚ùå';
            font-size: 10px;
        }

        .date-info {
            font-size: 13px;
            color: #666;
        }

        .actions {
            display: flex;
            gap: 4px;
            align-items: center;
            justify-content: flex-start;
            flex-wrap: wrap;
            width: 180px;
            min-width: 180px;
        }

        .actions .btn {
            padding: 6px 8px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 10px;
            font-weight: 500;
            transition: all 0.2s ease;
            display: inline-flex;
            align-items: center;
            gap: 3px;
            text-decoration: none;
            white-space: nowrap;
            min-height: 28px;
            line-height: 1;
        }

        .actions .btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 3px 8px rgba(0,0,0,0.12);
        }

        .actions .btn i {
            font-size: 10px;
        }

        .btn-view {
            background: #17a2b8;
            color: white;
            flex: 1;
            min-width: 50px;
            justify-content: center;
        }

        .btn-view:hover {
            background: #138496;
        }

        .btn-verify {
            background: #9c27b0;
            color: white;
            flex: 1;
            min-width: 60px;
            justify-content: center;
        }

        .btn-verify:hover {
            background: #7b1fa2;
        }

        .btn-approve {
            background: #28a745;
            color: white;
            flex: 1;
            min-width: 55px;
            justify-content: center;
        }

        .btn-approve:hover {
            background: #218838;
        }

        .btn-ship {
            background: #007bff;
            color: white;
            flex: 1;
            min-width: 55px;
            justify-content: center;
        }

        .btn-ship:hover {
            background: #0056b3;
        }

        .btn-edit {
            background: #ffc107;
            color: #212529;
            flex: 1;
            min-width: 50px;
            justify-content: center;
        }

        .btn-edit:hover {
            background: #e0a800;
        }

        .btn-cancel {
            background: #dc3545;
            color: white;
            flex: 1;
            min-width: 50px;
            justify-content: center;
        }

        .btn-cancel:hover {
            background: #c82333;
        }

        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            margin-top: 20px;
            padding: 20px;
        }

        .pagination button {
            padding: 8px 12px;
            border: 2px solid #e9ecef;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .pagination button:hover,
        .pagination button.active {
            background: #990000;
            color: white;
            border-color: #990000;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 2000;
        }

        .modal-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 30px;
            border-radius: 15px;
            width: 90%;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #e9ecef;
        }

        .modal-header h2 {
            color: #333;
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #666;
        }

        .order-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .detail-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
        }

        .detail-section h3 {
            color: #333;
            margin-bottom: 15px;
            font-size: 18px;
        }

        .detail-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .detail-label {
            font-weight: 600;
            color: #666;
        }

        .detail-value {
            color: #333;
        }

        .items-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        .items-table th,
        .items-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #e9ecef;
        }

        .items-table th {
            background: #f8f9fa;
            font-weight: 600;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #333;
        }

        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 14px;
        }

        .form-actions {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
            margin-top: 20px;
        }

        .form-actions button {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
        }

        .save-btn {
            background: #990000;
            color: white;
        }

        .cancel-form-btn {
            background: #6c757d;
            color: white;
        }

        .payment-section {
            background: #fff9c4;
            border: 2px solid #f57f17;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
        }

        .payment-section h3 {
            color: #e65100;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .bank-info {
            background: #fff3e0;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid #ff9800;
        }

        .bank-info h4 {
            color: #e65100;
            font-size: 16px;
            margin-bottom: 8px;
        }

        .bank-name {
            color: #333;
            font-size: 18px;
            font-weight: 600;
        }

        .slip-preview {
            text-align: center;
            margin: 20px 0;
        }

        .slip-preview h4 {
            color: #333;
            margin-bottom: 15px;
            font-size: 16px;
        }

        .slip-image {
            max-width: 100%;
            max-height: 400px;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .slip-image:hover {
            transform: scale(1.02);
        }

        .no-slip-message {
            color: #999;
            font-style: italic;
            padding: 40px;
            border: 2px dashed #ddd;
            border-radius: 8px;
            background: #f9f9f9;
        }

        .verification-actions {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 20px;
        }

        .verification-actions button {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .approve-payment-btn {
            background: linear-gradient(45deg, #4caf50, #66bb6a);
            color: white;
        }

        .approve-payment-btn:hover {
            background: linear-gradient(45deg, #388e3c, #4caf50);
            box-shadow: 0 4px 12px rgba(76, 175, 80, 0.4);
        }

        .reject-payment-btn {
            background: linear-gradient(45deg, #f44336, #e57373);
            color: white;
        }

        .reject-payment-btn:hover {
            background: linear-gradient(45deg, #d32f2f, #f44336);
            box-shadow: 0 4px 12px rgba(244, 67, 54, 0.4);
        }

        .lightbox {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            z-index: 3000;
            cursor: pointer;
        }

        .lightbox img {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            max-width: 90%;
            max-height: 90%;
            border-radius: 10px;
        }

        .lightbox .close {
            position: absolute;
            top: 20px;
            right: 40px;
            color: white;
            font-size: 35px;
            font-weight: bold;
            cursor: pointer;
        }

        .sidebar {
            background: #940606;
            color: white;
            width: 260px;
            min-width: 260px;
            height: 100%;
            position: fixed;
            display: flex;
            flex-direction: column;
            transition: all 0.3s ease;
            box-shadow: 4px 0 20px rgba(0,0,0,0.1);
        }

        .sidebar.collapsed {
            width: 0;
            min-width: 0;
            overflow: hidden;
        }

        .logo {
            padding: 30px 20px;
            text-align: center;
            border-bottom: 1px solid #940606;
            font-size: 18px;
            font-weight: 600;
            margin-top: 10px;
        }

        nav ul {
            list-style: none;
            padding: 20px 0;
        }

        nav li {
            margin: 5px 0;
            transition: all 0.3s ease;
        }

        nav li a {
            display: flex;
            align-items: center;
            padding: 15px 25px;
            color: white;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
        }

        nav li a i {
            margin-right: 12px;
            width: 20px;
            text-align: center;
        }

        nav li.active a,
        nav li a:hover {
            background: #051A37;
        }

        @media screen and (max-width: 1200px) {
            .actions {
                width: 160px;
                min-width: 160px;
            }
            
            .actions .btn {
                font-size: 9px;
                padding: 5px 6px;
                min-height: 26px;
            }
        }

        @media screen and (max-width: 768px) {
            .navbar-toggle {
                display: block;
            }

            .main-content {
                padding: 80px 15px 20px;
                margin-left: 0;
            }

            .header {
                flex-direction: column;
                gap: 15px;
                padding: 15px 20px;
            }

            .search-container input[type="text"] {
                width: 100%;
            }

            .filters-row {
                flex-direction: column;
                align-items: stretch;
            }

            .order-details {
                grid-template-columns: 1fr;
            }

            table {
                font-size: 12px;
            }

            th, td {
                padding: 8px 4px;
            }

            .actions {
                width: 140px;
                min-width: 140px;
                flex-direction: column;
                gap: 2px;
            }

            .actions .btn {
                font-size: 9px;
                padding: 4px 6px;
                min-height: 24px;
                width: 100%;
                justify-content: center;
            }

            .sidebar {
                position: fixed;
                top: 0;
                left: -260px;
                height: 100vh;
                z-index: 1000;
            }

            .sidebar.show {
                left: 0;
            }

            .status-badge {
                font-size: 9px;
                padding: 4px 8px;
            }

            .verification-actions {
                flex-direction: column;
            }
        }

        @media screen and (max-width: 480px) {
            .actions {
                width: 120px;
                min-width: 120px;
            }
            
            .actions .btn {
                font-size: 8px;
                padding: 3px 4px;
                min-height: 22px;
            }
            
            .order-id {
                font-size: 11px;
            }
            
            .customer-name {
                font-size: 12px;
            }
            
            .price-info {
                font-size: 13px;
            }
        }
    </style>
</head>

<body>
    <div class="navbar-toggle" onclick="toggleSidebar()">
        <i class="fas fa-bars"></i>
    </div>

    <div class="container">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="logo">
                <div>
                    <img src="image_admin/logo_cropped.png" width="100px">
                </div>
                <h2>‡∏£‡∏∞‡∏ö‡∏ö‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•</h2>
            </div>
            
            <nav>
                <ul>
                    <li>
                        <a href="dashboard_admin.html" onclick="showSection('dashboard')">
                            <i class="fas fa-tachometer-alt"></i>
                            ‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î
                        </a>
                    </li>
                    <li>
                        <a href="products_admin.html" onclick="showSection('products')">
                            <i class="fas fa-box"></i>
                            ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
                        </a>
                    </li>
                    <li class="active">
                        <a href="orders_admin.html" onclick="showSection('orders')">
                            <i class="fas fa-shopping-cart"></i>
                            ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠
                        </a>
                    </li>
                    <li>
                        <a href="admins_admin.html" onclick="showSection('admins')">
                            <i class="fas fa-users-cog"></i>
                            ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•
                        </a>
                    </li>
                    <li>
                        <a href="reports_admin.html" onclick="showSection('reports')">
                            <i class="fas fa-chart-bar"></i>
                            ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô
                        </a>
                    </li>
                </ul>
            </nav>
        </aside>

        <main class="main-content">
            <div class="header">
                <h1><i class="fas fa-shopping-cart"></i> ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</h1>
                <div class="search-filter">
                    <div class="search-container">
                        <input type="text" id="searchInput" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏£‡∏´‡∏±‡∏™‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠, ‡∏ä‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤...">
                        <i class="fas fa-search"></i>
                    </div>
                </div>
            </div>

            <div class="stats-row">
                <div class="stat-card pending-payment">
                    <div class="stat-number" id="pendingPaymentOrders">0</div>
                    <div class="stat-label">‡∏£‡∏≠‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</div>
                </div>
                <div class="stat-card payment-verification">
                    <div class="stat-number" id="paymentVerificationOrders">0</div>
                    <div class="stat-label">‡∏£‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</div>
                </div>
                <div class="stat-card shipping-preparation">
                    <div class="stat-number" id="shippingPreparationOrders">0</div>
                    <div class="stat-label">‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏™‡πà‡∏á</div>
                </div>
                <div class="stat-card shipping">
                    <div class="stat-number" id="shippingOrders">0</div>
                    <div class="stat-label">‡∏≠‡∏¢‡∏π‡πà‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏™‡πà‡∏á</div>
                </div>
                <div class="stat-card completed">
                    <div class="stat-number" id="completedOrders">0</div>
                    <div class="stat-label">‡∏à‡∏±‡∏î‡∏™‡πà‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à</div>
                </div>
                <div class="stat-card cancelled">
                    <div class="stat-number" id="cancelledOrders">0</div>
                    <div class="stat-label">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</div>
                </div>
            </div>

            <div class="filters-section">
                <div class="filters-row">
                    <div class="filter-group">
                        <label>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</label>
                        <select id="statusFilter">
                            <option value="">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</option>
                            <option value="pending-payment">‡∏£‡∏≠‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</option>
                            <option value="payment-verification">‡∏£‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</option>
                            <option value="shipping-preparation">‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏™‡πà‡∏á</option>
                            <option value="shipping">‡∏≠‡∏¢‡∏π‡πà‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏™‡πà‡∏á</option>
                            <option value="completed">‡∏à‡∏±‡∏î‡∏™‡πà‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à</option>
                            <option value="cancelled">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label>‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ï‡πà‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</label>
                        <input type="date" id="dateFromFilter">
                    </div>
                    <div class="filter-group">
                        <label>‡∏ñ‡∏∂‡∏á‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</label>
                        <input type="date" id="dateToFilter">
                    </div>
                    <div class="filter-group">
                        <label>‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏ï‡∏≤‡∏°</label>
                        <select id="sortFilter">
                            <option value="orderDate">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</option>
                            <option value="orderId">‡∏£‡∏´‡∏±‡∏™‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</option>
                            <option value="customer">‡∏ä‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</option>
                            <option value="total">‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°</option>
                            <option value="status">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="table-container">
                <table id="ordersTable">
                    <thead>
                        <tr>
                            <th style="width: 120px;">‡∏£‡∏´‡∏±‡∏™‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</th>
                            <th style="width: 160px;">‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</th>
                            <th style="width: 220px;">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</th>
                            <th style="width: 100px;">‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°</th>
                            <th style="width: 120px;">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th>
                            <th style="width: 100px;">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</th>
                            <th style="width: 180px;">‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
                        </tr>
                    </thead>
                    <tbody id="ordersTableBody">
                        <!-- Order rows will be dynamically inserted here -->
                    </tbody>
                </table>
            </div>

            <div class="pagination" id="pagination">
                <!-- Pagination buttons will be inserted here -->
            </div>
        </main>
    </div>

    <!-- Order Details Modal -->
    <div id="orderDetailsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="orderDetailsTitle">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</h2>
                <button class="close-btn" onclick="closeOrderDetailsModal()">&times;</button>
            </div>
            
            <div class="order-details">
                <div class="detail-section">
                    <h3><i class="fas fa-user"></i> ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</h3>
                    <div class="detail-row">
                        <span class="detail-label">‡∏ä‡∏∑‡πà‡∏≠:</span>
                        <span class="detail-value" id="detailCustomerName"></span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£:</span>
                        <span class="detail-value" id="detailCustomerPhone"></span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">‡∏≠‡∏µ‡πÄ‡∏°‡∏•:</span>
                        <span class="detail-value" id="detailCustomerEmail"></span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà:</span>
                        <span class="detail-value" id="detailCustomerAddress"></span>
                    </div>
                </div>
                
                <div class="detail-section">
                    <h3><i class="fas fa-shopping-cart"></i> ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</h3>
                    <div class="detail-row">
                        <span class="detail-label">‡∏£‡∏´‡∏±‡∏™‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠:</span>
                        <span class="detail-value" id="detailOrderId"></span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠:</span>
                        <span class="detail-value" id="detailOrderDate"></span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞:</span>
                        <span class="detail-value" id="detailOrderStatus"></span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏:</span>
                        <span class="detail-value" id="detailOrderNotes"></span>
                    </div>
                </div>
            </div>

            <!-- Payment Verification Section -->
            <div id="paymentSection" class="payment-section" style="display: none;">
                <h3>
                    <i class="fas fa-credit-card"></i>
                    ‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏•‡∏¥‡∏õ‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô
                </h3>
                
                <div class="bank-info">
                    <h4>‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡∏ö‡∏±‡∏ç‡∏ä‡∏µ:</h4>
                    <div class="bank-name" id="destinationBank">‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£‡∏Å‡∏™‡∏¥‡∏Å‡∏£‡πÑ‡∏ó‡∏¢</div>
                </div>

                <div class="slip-preview">
                    <h4>‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏™‡∏•‡∏¥‡∏õ‡∏Å‡∏≤‡∏£‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô:</h4>
                    <img id="paymentSlip" class="slip-image" src="" alt="Payment Slip" onclick="openLightbox(this.src)" style="display: none;">
                    <div id="noSlipMessage" class="no-slip-message" style="display: none;">
                        <i class="fas fa-exclamation-triangle"></i>
                        ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÅ‡∏ô‡∏ö‡∏£‡∏π‡∏õ‡∏™‡∏•‡∏¥‡∏õ
                    </div>
                </div>

                <div class="verification-actions">
                    <button class="approve-payment-btn" onclick="approvePayment()">
                        <i class="fas fa-check"></i>
                        ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô
                    </button>
                    <button class="reject-payment-btn" onclick="rejectPayment()">
                        <i class="fas fa-times"></i>
                        ‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô
                    </button>
                </div>
            </div>

            <div class="detail-section">
                <h3><i class="fas fa-list"></i> ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</h3>
                <table class="items-table">
                    <thead>
                        <tr>
                            <th>‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</th>
                            <th>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô</th>
                            <th>‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡πà‡∏≠‡∏´‡∏ô‡πà‡∏ß‡∏¢</th>
                            <th>‡∏£‡∏ß‡∏°</th>
                        </tr>
                    </thead>
                    <tbody id="orderItemsList">
                        <!-- Order items will be inserted here -->
                    </tbody>
                </table>
                
                <div style="margin-top: 20px; text-align: right;">
                    <div style="font-size: 18px; font-weight: 700; color: #333;">
                        ‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: <span id="detailOrderTotal"></span> ‡∏ö‡∏≤‡∏ó
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Update Status Modal -->
    <div id="updateStatusModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</h2>
                <button class="close-btn" onclick="closeUpdateStatusModal()">&times;</button>
            </div>
            
            <form id="updateStatusForm">
                <div class="form-group">
                    <label>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÉ‡∏´‡∏°‡πà *</label>
                    <select id="newStatus" required>
                        <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</option>
                        <option value="pending-payment">‡∏£‡∏≠‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</option>
                        <option value="payment-verification">‡∏£‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</option>
                        <option value="shipping-preparation">‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏™‡πà‡∏á</option>
                        <option value="shipping">‡∏≠‡∏¢‡∏π‡πà‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏™‡πà‡∏á</option>
                        <option value="completed">‡∏à‡∏±‡∏î‡∏™‡πà‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à</option>
                        <option value="cancelled">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏ (‡πÑ‡∏°‡πà‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö)</label>
                    <textarea id="statusNotes" rows="4" placeholder="‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞..."></textarea>
                </div>
                <div class="form-actions">
                    <button type="button" class="cancel-form-btn" onclick="closeUpdateStatusModal()">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                    <button type="submit" class="save-btn">‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Image Lightbox -->
    <div id="lightbox" class="lightbox" onclick="closeLightbox()">
        <span class="close" onclick="closeLightbox()">&times;</span>
        <img id="lightboxImage" src="" alt="Payment Slip">
    </div>

    <script>
        // Sample order data with updated status
        let orders = [
            {
                id: 1,
                orderId: "ORD-202507-001",
                customer: {
                    name: "‡∏ô‡∏≤‡∏¢ ‡∏™‡∏°‡∏ä‡∏≤‡∏¢ ‡πÉ‡∏à‡∏î‡∏µ",
                    phone: "089-123-4567",
                    email: "somchai@email.com",
                    address: "123 ‡∏ñ‡∏ô‡∏ô‡∏™‡∏∏‡∏Ç‡∏∏‡∏°‡∏ß‡∏¥‡∏ó ‡πÅ‡∏Ç‡∏ß‡∏á‡∏Ñ‡∏•‡∏≠‡∏á‡∏ï‡∏±‡∏ô ‡πÄ‡∏Ç‡∏ï‡∏ß‡∏±‡∏í‡∏ô‡∏≤ ‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û‡∏Ø 10110"
                },
                items: [
                    { name: "‡πÄ‡∏´‡∏•‡πá‡∏Å‡πÄ‡∏™‡πâ‡∏ô‡∏Å‡∏•‡∏° SR24 ‡∏Ç‡∏ô‡∏≤‡∏î 12 ‡∏°‡∏°.", quantity: 50, price: 130.00 },
                    { name: "‡πÄ‡∏´‡∏•‡πá‡∏Å‡πÅ‡∏ú‡πà‡∏ô‡∏î‡∏≥ ‡∏´‡∏ô‡∏≤ 4 ‡∏°‡∏°.", quantity: 2, price: 3450.00 }
                ],
                total: 13400.00,
                status: "payment-verification",
                orderDate: "2025-08-05",
                paymentInfo: {
                    destinationBank: "‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£‡∏Å‡∏™‡∏¥‡∏Å‡∏£‡πÑ‡∏ó‡∏¢",
                    slipImage: "data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAAoACgDASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD3+iiigAooooAKKKKACiiigD//"
                },
                notes: "‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÑ‡∏î‡πâ‡∏™‡πà‡∏á‡∏™‡∏•‡∏¥‡∏õ‡∏Å‡∏≤‡∏£‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡πÅ‡∏•‡πâ‡∏ß ‡∏£‡∏≠‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö"
            },
            {
                id: 2,
                orderId: "ORD-202507-002",
                customer: {
                    name: "‡∏ô‡∏≤‡∏á ‡∏™‡∏°‡∏´‡∏ç‡∏¥‡∏á ‡∏£‡∏±‡∏Å‡∏©‡πå‡∏î‡∏µ",
                    phone: "081-987-6543",
                    email: "somying@email.com",
                    address: "456 ‡∏ñ‡∏ô‡∏ô‡∏û‡∏´‡∏•‡πÇ‡∏¢‡∏ò‡∏¥‡∏ô ‡πÅ‡∏Ç‡∏ß‡∏á‡∏à‡∏ï‡∏∏‡∏à‡∏±‡∏Å‡∏£ ‡πÄ‡∏Ç‡∏ï‡∏à‡∏ï‡∏∏‡∏à‡∏±‡∏Å‡∏£ ‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û‡∏Ø 10900"
                },
                items: [
                    { name: "‡πÄ‡∏´‡∏•‡πá‡∏Å‡∏Å‡∏•‡πà‡∏≠‡∏á‡πÅ‡∏ö‡∏ô 2x1 ‡∏´‡∏ô‡∏≤ 2.0 ‡∏°‡∏°.", quantity: 20, price: 380.00 },
                    { name: "‡πÄ‡∏´‡∏•‡πá‡∏Å‡∏â‡∏≤‡∏Å 40x40 ‡∏°‡∏°. ‡∏´‡∏ô‡∏≤ 4 ‡∏°‡∏°.", quantity: 10, price: 420.00 },
                    { name: "‡∏ï‡∏∞‡πÅ‡∏Å‡∏£‡∏á‡πÄ‡∏´‡∏•‡πá‡∏Å‡πÑ‡∏ß‡∏£‡πå‡πÄ‡∏°‡∏ä 6 ‡∏°‡∏°. 20 ‡∏ã‡∏°.", quantity: 3, price: 1250.00 }
                ],
                total: 15350.00,
                status: "shipping-preparation",
                orderDate: "2025-07-30",
                notes: "‡∏à‡∏±‡∏î‡∏™‡πà‡∏á‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà‡∏£‡∏∞‡∏ö‡∏∏"
            },
            {
                id: 3,
                orderId: "ORD-202507-003",
                customer: {
                    name: "‡∏ô‡∏≤‡∏¢ ‡∏õ‡∏£‡∏∞‡πÄ‡∏™‡∏£‡∏¥‡∏ê ‡∏°‡∏±‡πà‡∏á‡∏°‡∏µ",
                    phone: "089-555-7777",
                    email: "prasert@email.com",
                    address: "789 ‡∏ñ‡∏ô‡∏ô‡∏•‡∏≤‡∏î‡∏û‡∏£‡πâ‡∏≤‡∏ß ‡πÅ‡∏Ç‡∏ß‡∏á‡∏•‡∏≤‡∏î‡∏û‡∏£‡πâ‡∏≤‡∏ß ‡πÄ‡∏Ç‡∏ï‡∏•‡∏≤‡∏î‡∏û‡∏£‡πâ‡∏≤‡∏ß ‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û‡∏Ø 10230"
                },
                items: [
                    { name: "‡∏•‡∏ß‡∏î‡∏ú‡∏π‡∏Å‡πÄ‡∏´‡∏•‡πá‡∏Å ‡πÄ‡∏ö‡∏≠‡∏£‡πå 18", quantity: 100, price: 45.00 }
                ],
                total: 4500.00,
                status: "completed",
                orderDate: "2025-07-29",
                notes: "‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏Ç‡∏≠‡πÉ‡∏ö‡∏Å‡∏≥‡∏Å‡∏±‡∏ö‡∏†‡∏≤‡∏©‡∏µ"
            },
            {
                id: 4,
                orderId: "ORD-202507-004",
                customer: {
                    name: "‡∏ô‡∏≤‡∏á ‡∏ß‡∏¥‡∏†‡∏≤ ‡∏™‡∏∏‡∏Ç‡πÉ‡∏™",
                    phone: "082-111-2222",
                    email: "wipa@email.com",
                    address: "321 ‡∏ñ‡∏ô‡∏ô‡∏£‡∏±‡∏ä‡∏î‡∏≤‡∏†‡∏¥‡πÄ‡∏©‡∏Å ‡πÅ‡∏Ç‡∏ß‡∏á‡∏™‡∏≤‡∏°‡πÄ‡∏™‡∏ô‡∏ô‡∏≠‡∏Å ‡πÄ‡∏Ç‡∏ï‡∏´‡πâ‡∏ß‡∏¢‡∏Ç‡∏ß‡∏≤‡∏á ‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û‡∏Ø 10310"
                },
                items: [
                    { name: "‡πÄ‡∏´‡∏•‡πá‡∏Å‡πÄ‡∏™‡πâ‡∏ô‡∏Å‡∏•‡∏° SR24 ‡∏Ç‡∏ô‡∏≤‡∏î 12 ‡∏°‡∏°.", quantity: 80, price: 130.00 },
                    { name: "‡πÄ‡∏´‡∏•‡πá‡∏Å‡πÅ‡∏ú‡πà‡∏ô‡∏î‡∏≥ ‡∏´‡∏ô‡∏≤ 4 ‡∏°‡∏°.", quantity: 1, price: 3450.00 }
                ],
                total: 13850.00,
                status: "shipping",
                orderDate: "2025-07-28",
                notes: ""
            },
            {
                id: 5,
                orderId: "ORD-202507-005",
                customer: {
                    name: "‡∏ô‡∏≤‡∏¢ ‡∏≠‡∏ô‡∏∏‡∏ä‡∏≤ ‡∏û‡∏±‡∏í‡∏ô‡∏≤",
                    phone: "088-999-8888",
                    email: "anucha@email.com",
                    address: "654 ‡∏ñ‡∏ô‡∏ô‡πÄ‡∏û‡∏ä‡∏£‡∏ö‡∏∏‡∏£‡∏µ ‡πÅ‡∏Ç‡∏ß‡∏á‡∏°‡∏±‡∏Å‡∏Å‡∏∞‡∏™‡∏±‡∏ô ‡πÄ‡∏Ç‡∏ï‡∏£‡∏≤‡∏ä‡πÄ‡∏ó‡∏ß‡∏µ ‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û‡∏Ø 10400"
                },
                items: [
                    { name: "‡πÄ‡∏´‡∏•‡πá‡∏Å‡∏â‡∏≤‡∏Å 40x40 ‡∏°‡∏°. ‡∏´‡∏ô‡∏≤ 4 ‡∏°‡∏°.", quantity: 5, price: 420.00 },
                    { name: "‡∏ï‡∏∞‡πÅ‡∏Å‡∏£‡∏á‡πÄ‡∏´‡∏•‡πá‡∏Å‡πÑ‡∏ß‡∏£‡πå‡πÄ‡∏°‡∏ä 6 ‡∏°‡∏°. 20 ‡∏ã‡∏°.", quantity: 2, price: 1250.00 }
                ],
                total: 4600.00,
                status: "cancelled",
                orderDate: "2025-07-27",
                notes: "‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏Ç‡∏≠‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏≤‡∏Å‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡πÅ‡∏ú‡∏ô‡∏á‡∏≤‡∏ô"
            },
            {
                id: 6,
                orderId: "ORD-202507-006",
                customer: {
                    name: "‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó ‡∏Å‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á ABC ‡∏à‡∏≥‡∏Å‡∏±‡∏î",
                    phone: "02-123-4567",
                    email: "contact@abc-construction.com",
                    address: "999 ‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à ‡∏ä‡∏±‡πâ‡∏ô 15 ‡∏ñ‡∏ô‡∏ô‡∏™‡∏µ‡∏•‡∏° ‡πÅ‡∏Ç‡∏ß‡∏á‡∏™‡∏µ‡∏•‡∏° ‡πÄ‡∏Ç‡∏ï‡∏ö‡∏≤‡∏á‡∏£‡∏±‡∏Å ‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û‡∏Ø 10500"
                },
                items: [
                    { name: "‡πÄ‡∏´‡∏•‡πá‡∏Å‡πÄ‡∏™‡πâ‡∏ô‡∏Å‡∏•‡∏° SR24 ‡∏Ç‡∏ô‡∏≤‡∏î 12 ‡∏°‡∏°.", quantity: 200, price: 130.00 },
                    { name: "‡πÄ‡∏´‡∏•‡πá‡∏Å‡πÅ‡∏ú‡πà‡∏ô‡∏î‡∏≥ ‡∏´‡∏ô‡∏≤ 4 ‡∏°‡∏°.", quantity: 10, price: 3450.00 },
                    { name: "‡πÄ‡∏´‡∏•‡πá‡∏Å‡∏Å‡∏•‡πà‡∏≠‡∏á‡πÅ‡∏ö‡∏ô 2x1 ‡∏´‡∏ô‡∏≤ 2.0 ‡∏°‡∏°.", quantity: 50, price: 380.00 }
                ],
                total: 84500.00,
                status: "payment-verification",
                orderDate: "2025-08-01",
                paymentInfo: {
                    destinationBank: "‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£‡πÑ‡∏ó‡∏¢‡∏û‡∏≤‡∏ì‡∏¥‡∏ä‡∏¢‡πå",
                    slipImage: "data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAAoACgDASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD3+iiigAooooAKKKKACiiigD//"
                },
                notes: "‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡∏ç‡πà ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ö‡∏Å‡∏≥‡∏Å‡∏±‡∏ö‡∏†‡∏≤‡∏©‡∏µ‡πÄ‡∏ï‡πá‡∏°‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö"
            },
            {
                id: 7,
                orderId: "ORD-202508-007",
                customer: {
                    name: "‡∏ô‡∏≤‡∏¢ ‡∏à‡∏¥‡∏£‡∏≤‡∏¢‡∏∏ ‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå",
                    phone: "085-444-3333",
                    email: "jirayu@email.com",
                    address: "111 ‡∏ñ‡∏ô‡∏ô‡∏á‡∏≤‡∏°‡∏ß‡∏á‡∏®‡πå‡∏ß‡∏≤‡∏ô ‡πÅ‡∏Ç‡∏ß‡∏á‡∏•‡∏≤‡∏î‡∏¢‡∏≤‡∏ß ‡πÄ‡∏Ç‡∏ï‡∏à‡∏ï‡∏∏‡∏à‡∏±‡∏Å‡∏£ ‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û‡∏Ø 10900"
                },
                items: [
                    { name: "‡πÄ‡∏´‡∏•‡πá‡∏Å‡πÄ‡∏™‡πâ‡∏ô‡∏Å‡∏•‡∏° SR24 ‡∏Ç‡∏ô‡∏≤‡∏î 16 ‡∏°‡∏°.", quantity: 30, price: 180.00 }
                ],
                total: 5400.00,
                status: "pending-payment",
                orderDate: "2025-08-06",
                notes: "‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà"
            },
            {
                id: 8,
                orderId: "ORD-202508-008",
                customer: {
                    name: "‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß ‡∏°‡∏≤‡∏•‡∏µ ‡πÉ‡∏™‡πÉ‡∏™",
                    phone: "086-777-8888",
                    email: "malee@email.com",
                    address: "222 ‡∏ñ‡∏ô‡∏ô‡∏£‡∏≤‡∏°‡∏Ñ‡∏≥‡πÅ‡∏´‡∏á ‡πÅ‡∏Ç‡∏ß‡∏á‡∏´‡∏±‡∏ß‡∏´‡∏°‡∏≤‡∏Å ‡πÄ‡∏Ç‡∏ï‡∏ö‡∏≤‡∏á‡∏Å‡∏∞‡∏õ‡∏¥ ‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û‡∏Ø 10240"
                },
                items: [
                    { name: "‡πÄ‡∏´‡∏•‡πá‡∏Å‡πÄ‡∏™‡πâ‡∏ô‡∏Å‡∏•‡∏° SR24 ‡∏Ç‡∏ô‡∏≤‡∏î 10 ‡∏°‡∏°.", quantity: 40, price: 95.00 }
                ],
                total: 3800.00,
                status: "payment-verification",
                orderDate: "2025-08-07",
                paymentInfo: {
                    destinationBank: "‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û",
                    slipImage: null // ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏•‡∏¥‡∏õ
                },
                notes: "‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÅ‡∏à‡πâ‡∏á‡∏ß‡πà‡∏≤‡∏à‡∏∞‡∏™‡πà‡∏á‡∏™‡∏•‡∏¥‡∏õ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ"
            }
        ];

        let currentPage = 1;
        const itemsPerPage = 10;
        let filteredOrders = [...orders];
        let currentOrderId = null;

        // Get status info with updated status
        function getStatusInfo(status) {
            const statusMap = {
                'pending-payment': { class: 'status-pending-payment', text: '‡∏£‡∏≠‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô' },
                'payment-verification': { class: 'status-payment-verification', text: '‡∏£‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö' },
                'shipping-preparation': { class: 'status-shipping-preparation', text: '‡∏£‡∏≠‡∏à‡∏±‡∏î‡∏™‡πà‡∏á' },
                'shipping': { class: 'status-shipping', text: '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏à‡∏±‡∏î‡∏™‡πà‡∏á' },
                'completed': { class: 'status-completed', text: '‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à' },
                'cancelled': { class: 'status-cancelled', text: '‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å' }
            };
            return statusMap[status] || { class: 'status-pending-payment', text: '‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö' };
        }

        // Format date for display
        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('th-TH', {
                year: 'numeric',
                month: 'short',
                day: 'numeric'
            });
        }

        // Format currency
        function formatCurrency(amount) {
            return new Intl.NumberFormat('th-TH').format(amount);
        }

        // Get order items summary
        function getItemsSummary(items) {
            if (items.length === 1) {
                return items[0].name.substring(0, 30) + (items[0].name.length > 30 ? '...' : '');
            }
            return `${items[0].name.substring(0, 20)}... ‡πÅ‡∏•‡∏∞‡∏≠‡∏µ‡∏Å ${items.length - 1} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£`;
        }

        // Generate action buttons based on order status
        function getActionButtons(order) {
            const buttons = [];
            
            // ‡∏õ‡∏∏‡πà‡∏°‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î - ‡πÉ‡∏ä‡πâ‡∏ó‡∏∏‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞
            buttons.push(`
                <button class="btn btn-view" onclick="viewOrderDetails(${order.id})" title="‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î">
                    <i class="fas fa-eye"></i> ‡∏î‡∏π
                </button>
            `);

            // ‡∏õ‡∏∏‡πà‡∏°‡∏ï‡∏≤‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏â‡∏û‡∏≤‡∏∞
            switch (order.status) {
                case 'payment-verification':
                    buttons.push(`
                        <button class="btn btn-approve" onclick="quickApprovePayment(${order.id})" title="‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥">
                            <i class="fas fa-check"></i> ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥
                        </button>
                    `);
                    break;

                case 'shipping-preparation':
                    buttons.push(`
                        <button class="btn btn-ship" onclick="quickUpdateStatus(${order.id}, 'shipping')" title="‡∏à‡∏±‡∏î‡∏™‡πà‡∏á">
                            <i class="fas fa-shipping-fast"></i> ‡∏à‡∏±‡∏î‡∏™‡πà‡∏á
                        </button>
                    `);
                    break;

                case 'shipping':
                    buttons.push(`
                        <button class="btn btn-approve" onclick="quickUpdateStatus(${order.id}, 'completed')" title="‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô">
                            <i class="fas fa-check-circle"></i> ‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô
                        </button>
                    `);
                    break;

                case 'pending-payment':
                    buttons.push(`
                        <button class="btn btn-edit" onclick="updateOrderStatus(${order.id})" title="‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞">
                            <i class="fas fa-edit"></i> ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
                        </button>
                    `);
                    break;

                default:
                    // ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏≠‡∏∑‡πà‡∏ô‡πÜ ‡∏ó‡∏µ‡πà‡∏¢‡∏±‡∏á‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏î‡πâ
                    if (order.status !== 'completed' && order.status !== 'cancelled') {
                        buttons.push(`
                            <button class="btn btn-edit" onclick="updateOrderStatus(${order.id})" title="‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞">
                                <i class="fas fa-edit"></i> ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
                            </button>
                        `);
                    }
                    break;
            }

            // ‡∏õ‡∏∏‡πà‡∏°‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å - ‡πÑ‡∏°‡πà‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡πÅ‡∏•‡πâ‡∏ß
            if (order.status !== 'completed' && order.status !== 'cancelled') {
                buttons.push(`
                    <button class="btn btn-cancel" onclick="quickUpdateStatus(${order.id}, 'cancelled')" title="‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å">
                        <i class="fas fa-times"></i> ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å
                    </button>
                `);
            }

            return buttons.join('');
        }

        // Render orders table
        function renderOrders() {
            const tbody = document.getElementById('ordersTableBody');
            const startIndex = (currentPage - 1) * itemsPerPage;
            const endIndex = startIndex + itemsPerPage;
            const pageOrders = filteredOrders.slice(startIndex, endIndex);

            tbody.innerHTML = pageOrders.map(order => {
                const statusInfo = getStatusInfo(order.status);
                const itemsSummary = getItemsSummary(order.items);
                const totalItems = order.items.reduce((sum, item) => sum + item.quantity, 0);
                
                return `
                    <tr>
                        <td>
                            <span class="order-id">${order.orderId}</span>
                        </td>
                        <td>
                            <div class="customer-info">
                                <div class="customer-name">${order.customer.name}</div>
                                <div class="customer-phone">${order.customer.phone}</div>
                            </div>
                        </td>
                        <td>
                            <div class="order-items">
                                ${itemsSummary}
                                <span class="item-count">${totalItems} ‡∏ä‡∏¥‡πâ‡∏ô</span>
                            </div>
                        </td>
                        <td>
                            <div class="price-info">‡∏ø${formatCurrency(order.total)}</div>
                        </td>
                        <td>
                            <span class="status-badge ${statusInfo.class}">${statusInfo.text}</span>
                        </td>
                        <td>
                            <div class="date-info">${formatDate(order.orderDate)}</div>
                        </td>
                        <td class="actions">
                            ${getActionButtons(order)}
                        </td>
                    </tr>
                `;
            }).join('');

            renderPagination();
            updateStats();
        }

        // Render pagination
        function renderPagination() {
            const totalPages = Math.ceil(filteredOrders.length / itemsPerPage);
            const pagination = document.getElementById('pagination');
            
            if (totalPages <= 1) {
                pagination.innerHTML = '';
                return;
            }

            let buttons = [];
            
            // Previous button
            buttons.push(`
                <button onclick="changePage(${currentPage - 1})" ${currentPage === 1 ? 'disabled' : ''}>
                    <i class="fas fa-chevron-left"></i>
                </button>
            `);

            // Page numbers
            for (let i = 1; i <= totalPages; i++) {
                buttons.push(`
                    <button onclick="changePage(${i})" ${i === currentPage ? 'class="active"' : ''}>
                        ${i}
                    </button>
                `);
            }

            // Next button
            buttons.push(`
                <button onclick="changePage(${currentPage + 1})" ${currentPage === totalPages ? 'disabled' : ''}>
                    <i class="fas fa-chevron-right"></i>
                </button>
            `);

            pagination.innerHTML = buttons.join('');
        }

        // Change page
        function changePage(page) {
            const totalPages = Math.ceil(filteredOrders.length / itemsPerPage);
            if (page >= 1 && page <= totalPages) {
                currentPage = page;
                renderOrders();
            }
        }

        // Update statistics
        function updateStats() {
            const stats = {
                pendingPayment: filteredOrders.filter(o => o.status === 'pending-payment').length,
                paymentVerification: filteredOrders.filter(o => o.status === 'payment-verification').length,
                shippingPreparation: filteredOrders.filter(o => o.status === 'shipping-preparation').length,
                shipping: filteredOrders.filter(o => o.status === 'shipping').length,
                completed: filteredOrders.filter(o => o.status === 'completed').length,
                cancelled: filteredOrders.filter(o => o.status === 'cancelled').length
            };

            document.getElementById('pendingPaymentOrders').textContent = stats.pendingPayment;
            document.getElementById('paymentVerificationOrders').textContent = stats.paymentVerification;
            document.getElementById('shippingPreparationOrders').textContent = stats.shippingPreparation;
            document.getElementById('shippingOrders').textContent = stats.shipping;
            document.getElementById('completedOrders').textContent = stats.completed;
            document.getElementById('cancelledOrders').textContent = stats.cancelled;
        }

        // Filter and search functions
        function applyFilters() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const statusFilter = document.getElementById('statusFilter').value;
            const dateFromFilter = document.getElementById('dateFromFilter').value;
            const dateToFilter = document.getElementById('dateToFilter').value;

            filteredOrders = orders.filter(order => {
                const matchesSearch = order.orderId.toLowerCase().includes(searchTerm) ||
                                    order.customer.name.toLowerCase().includes(searchTerm) ||
                                    order.customer.phone.includes(searchTerm) ||
                                    order.items.some(item => item.name.toLowerCase().includes(searchTerm));
                
                const matchesStatus = !statusFilter || order.status === statusFilter;
                
                let matchesDateRange = true;
                if (dateFromFilter || dateToFilter) {
                    const orderDate = new Date(order.orderDate);
                    if (dateFromFilter) {
                        matchesDateRange = matchesDateRange && orderDate >= new Date(dateFromFilter);
                    }
                    if (dateToFilter) {
                        matchesDateRange = matchesDateRange && orderDate <= new Date(dateToFilter);
                    }
                }

                return matchesSearch && matchesStatus && matchesDateRange;
            });

            // Apply sorting after filtering
            applySorting();

            currentPage = 1;
            renderOrders();
        }

        // Sort orders function
        function applySorting() {
            const sortBy = document.getElementById('sortFilter').value;
            
            filteredOrders.sort((a, b) => {
                switch (sortBy) {
                    case 'orderId':
                        return a.orderId.localeCompare(b.orderId);
                    case 'customer':
                        return a.customer.name.localeCompare(b.customer.name, 'th');
                    case 'total':
                        return b.total - a.total; // Descending order (highest first)
                    case 'status':
                        return a.status.localeCompare(b.status);
                    case 'orderDate':
                    default:
                        return new Date(b.orderDate) - new Date(a.orderDate); // Newest first
                }
            });
        }

        // Sort orders when dropdown changes
        function onSortChange() {
            applySorting();
            renderOrders();
        }

        // View order details
        function viewOrderDetails(id) {
            const order = orders.find(o => o.id === id);
            if (!order) return;

            currentOrderId = id;
            const statusInfo = getStatusInfo(order.status);

            // Populate order details
            document.getElementById('orderDetailsTitle').textContent = `‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠ ${order.orderId}`;
            document.getElementById('detailCustomerName').textContent = order.customer.name;
            document.getElementById('detailCustomerPhone').textContent = order.customer.phone;
            document.getElementById('detailCustomerEmail').textContent = order.customer.email;
            document.getElementById('detailCustomerAddress').textContent = order.customer.address;
            document.getElementById('detailOrderId').textContent = order.orderId;
            document.getElementById('detailOrderDate').textContent = formatDate(order.orderDate);
            document.getElementById('detailOrderStatus').innerHTML = `<span class="status-badge ${statusInfo.class}">${statusInfo.text}</span>`;
            document.getElementById('detailOrderNotes').textContent = order.notes || '‡πÑ‡∏°‡πà‡∏°‡∏µ';
            document.getElementById('detailOrderTotal').textContent = formatCurrency(order.total);

            // Show/hide payment section based on status
            const paymentSection = document.getElementById('paymentSection');
            if (order.status === 'payment-verification' && order.paymentInfo) {
                paymentSection.style.display = 'block';
                
                // Show destination bank
                document.getElementById('destinationBank').textContent = order.paymentInfo.destinationBank;
                
                // Handle payment slip image
                const slipImg = document.getElementById('paymentSlip');
                const noSlipMsg = document.getElementById('noSlipMessage');
                
                if (order.paymentInfo.slipImage) {
                    slipImg.src = order.paymentInfo.slipImage;
                    slipImg.style.display = 'block';
                    noSlipMsg.style.display = 'none';
                } else {
                    slipImg.style.display = 'none';
                    noSlipMsg.style.display = 'block';
                }
            } else {
                paymentSection.style.display = 'none';
            }

            // Populate items table
            const itemsList = document.getElementById('orderItemsList');
            itemsList.innerHTML = order.items.map(item => `
                <tr>
                    <td>${item.name}</td>
                    <td>${item.quantity} ‡∏ä‡∏¥‡πâ‡∏ô</td>
                    <td>‡∏ø${formatCurrency(item.price)}</td>
                    <td>‡∏ø${formatCurrency(item.quantity * item.price)}</td>
                </tr>
            `).join('');

            document.getElementById('orderDetailsModal').style.display = 'block';
        }

        // Quick approve payment
        function quickApprovePayment(id) {
            if (confirm('‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡∏ô‡∏µ‡πâ?')) {
                updateOrderStatusInData(id, 'shipping-preparation', '‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡πÅ‡∏•‡πâ‡∏ß');
                showNotification('‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!', 'success');
            }
        }

        // Approve payment from modal
        function approvePayment() {
            if (currentOrderId && confirm('‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡∏ô‡∏µ‡πâ?')) {
                updateOrderStatusInData(currentOrderId, 'shipping-preparation', '‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡πÅ‡∏•‡πâ‡∏ß');
                closeOrderDetailsModal();
                showNotification('‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!', 'success');
            }
        }

        // Reject payment from modal
        function rejectPayment() {
            if (currentOrderId) {
                const reason = prompt('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô:');
                if (reason !== null && reason.trim() !== '') {
                    updateOrderStatusInData(currentOrderId, 'pending-payment', `‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô: ${reason.trim()}`);
                    closeOrderDetailsModal();
                    showNotification('‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡πÅ‡∏•‡πâ‡∏ß', 'error');
                }
            }
        }

        // Open lightbox for slip image
        function openLightbox(src) {
            const lightbox = document.getElementById('lightbox');
            const lightboxImage = document.getElementById('lightboxImage');
            lightboxImage.src = src;
            lightbox.style.display = 'block';
        }

        // Close lightbox
        function closeLightbox() {
            document.getElementById('lightbox').style.display = 'none';
        }

        // Update order status modal
        function updateOrderStatus(id) {
            const order = orders.find(o => o.id === id);
            if (!order) return;

            currentOrderId = id;
            document.getElementById('newStatus').value = order.status;
            document.getElementById('statusNotes').value = '';
            document.getElementById('updateStatusModal').style.display = 'block';
        }

        // Quick update status
        function quickUpdateStatus(id, newStatus) {
            const statusText = getStatusInfo(newStatus).text;
            if (confirm(`‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏õ‡πá‡∏ô "${statusText}"?`)) {
                updateOrderStatusInData(id, newStatus, '');
            }
        }

        // Update order status in data
        function updateOrderStatusInData(id, newStatus, notes) {
            const orderIndex = orders.findIndex(o => o.id === id);
            if (orderIndex !== -1) {
                orders[orderIndex].status = newStatus;
                if (notes) {
                    orders[orderIndex].notes = notes;
                }
                applyFilters();
                showNotification(`‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏õ‡πá‡∏ô "${getStatusInfo(newStatus).text}" ‡πÅ‡∏•‡πâ‡∏ß`, 'success');
            }
        }

        // Close modals
        function closeOrderDetailsModal() {
            document.getElementById('orderDetailsModal').style.display = 'none';
            currentOrderId = null;
        }

        function closeUpdateStatusModal() {
            document.getElementById('updateStatusModal').style.display = 'none';
            currentOrderId = null;
        }

        // Handle status update form submission
        document.getElementById('updateStatusForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const newStatus = document.getElementById('newStatus').value;
            const notes = document.getElementById('statusNotes').value;
            
            if (currentOrderId && newStatus) {
                updateOrderStatusInData(currentOrderId, newStatus, notes);
                closeUpdateStatusModal();
            }
        });

        // Show notification function
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 15px 20px;
                border-radius: 8px;
                color: white;
                font-weight: 600;
                z-index: 3000;
                opacity: 0;
                transform: translateX(100%);
                transition: all 0.3s ease;
                ${type === 'success' ? 'background: #28a745;' : ''}
                ${type === 'error' ? 'background: #dc3545;' : ''}
                ${type === 'info' ? 'background: #17a2b8;' : ''}
            `;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.opacity = '1';
                notification.style.transform = 'translateX(0)';
            }, 100);
            
            setTimeout(() => {
                notification.style.opacity = '0';
                notification.style.transform = 'translateX(100%)';
                setTimeout(() => {
                    if (document.body.contains(notification)) {
                        document.body.removeChild(notification);
                    }
                }, 300);
            }, 3000);
        }

        // Advanced search with debounce
        let searchTimeout;
        function debounceSearch() {
            clearTimeout(searchTimeout);
            searchTimeout = setTimeout(applyFilters, 300);
        }

        // Toggle sidebar
        function toggleSidebar() {
            const sidebar = document.getElementById("sidebar");
            const main = document.querySelector(".main-content");

            if (sidebar) {
                sidebar.classList.toggle("show");
                main.classList.toggle("overlay");
            }
        }

        // Show different sections
        function showSection(section) {
            if (section === 'dashboard') {
                window.location.href = 'dashboard_admin.html';
            } else if (section === 'products') {
                window.location.href = 'products_admin.html';
            } else if (section === 'admins') {
                window.location.href = 'admins_admin.html';
            } else if (section === 'reports') {
                window.location.href = 'reports_admin.html';
            } else if (section === 'orders') {
                if (window.innerWidth <= 768) {
                    const sidebar = document.getElementById("sidebar");
                    const main = document.querySelector(".main-content");
                    if (sidebar) {
                        sidebar.classList.remove("show");
                        main.classList.remove("overlay");
                    }
                }
            }
        }

        // Close sidebar when clicking outside (mobile only)
        document.addEventListener("click", function (e) {
            const sidebar = document.getElementById("sidebar");
            const toggle = document.querySelector(".navbar-toggle");
            const main = document.querySelector(".main-content");

            if (!sidebar) return;

            const clickedOutside = !sidebar.contains(e.target) && !toggle.contains(e.target);

            if (sidebar.classList.contains("show") && clickedOutside && window.innerWidth <= 768) {
                sidebar.classList.remove("show");
                main.classList.remove("overlay");
            }
        });

        // Export functions for global access
        window.viewOrderDetails = viewOrderDetails;
        window.quickApprovePayment = quickApprovePayment;
        window.approvePayment = approvePayment;
        window.rejectPayment = rejectPayment;
        window.updateOrderStatus = updateOrderStatus;
        window.quickUpdateStatus = quickUpdateStatus;
        window.closeOrderDetailsModal = closeOrderDetailsModal;
        window.closeUpdateStatusModal = closeUpdateStatusModal;
        window.openLightbox = openLightbox;
        window.closeLightbox = closeLightbox;
        window.changePage = changePage;
        window.toggleSidebar = toggleSidebar;
        window.showSection = showSection;

        // Event listeners
        document.addEventListener('DOMContentLoaded', function() {
            // Initial render
            renderOrders();
            
            // Set up event listeners
            document.getElementById('searchInput').addEventListener('input', debounceSearch);
            document.getElementById('statusFilter').addEventListener('change', applyFilters);
            document.getElementById('dateFromFilter').addEventListener('change', applyFilters);
            document.getElementById('dateToFilter').addEventListener('change', applyFilters);
            document.getElementById('sortFilter').addEventListener('change', onSortChange);
            
            // Close modals when clicking outside
            document.getElementById('orderDetailsModal').addEventListener('click', function(e) {
                if (e.target === this) {
                    closeOrderDetailsModal();
                }
            });
            
            document.getElementById('updateStatusModal').addEventListener('click', function(e) {
                if (e.target === this) {
                    closeUpdateStatusModal();
                }
            });
            
            // Close lightbox when clicking outside
            document.getElementById('lightbox').addEventListener('click', function(e) {
                if (e.target === this || e.target.classList.contains('close')) {
                    closeLightbox();
                }
            });
            
            // Close modals with Escape key
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    if (document.getElementById('orderDetailsModal').style.display === 'block') {
                        closeOrderDetailsModal();
                    }
                    if (document.getElementById('updateStatusModal').style.display === 'block') {
                        closeUpdateStatusModal();
                    }
                    if (document.getElementById('lightbox').style.display === 'block') {
                        closeLightbox();
                    }
                }
            });
        });

        // Keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            // Ctrl+F or Cmd+F for search focus
            if ((e.ctrlKey || e.metaKey) && e.key === 'f') {
                e.preventDefault();
                document.getElementById('searchInput').focus();
            }
        });

        // Auto-refresh stats every 30 seconds (simulated)
        setInterval(function() {
            updateStats();
        }, 30000);
    </script>
</body>
</html>